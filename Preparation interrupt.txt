最小单片机系统
P0 接口 8位 P0.0 -- P0.7
P1 接口 8位 P1.0 -- P1.7
P2 接口 8位 P2.0 -- P2.7
P3 接口 8位 P3.0 -- P3.7
P1、P2、P3有上拉电阻
P0无上拉电阻，使用时可以外置，例如液晶显示屏和8段数码管 
晶振 18引脚（C2电容）与19引脚（C3电容）
时钟电路用于给单片机提供时钟脉冲，这样单片机才能工作
复位 9引脚（C1电容） 执行复位时需要两个周期的高电平
接电 40引脚  单片机工作电源5V
接地 20引脚
下载程序存在内部ROM,需要将31引脚“EA/VPP”接高电平，
单片机工作默认执行内部ROM代码，如果接地，就使用扩展外部ROM


H桥路原理
主要内容三极管和数字逻辑电路
三极管和部分电路是封装在L293D内部


PWM硬件调速原理
产生两个PWM波，两个波形的占空比为80/256，两个波形错开，相差48/256
通过定时器控制，定时器T0中断启动，I0输出高电平，
在定时器T0中断中启动定时器T1，I0输出低电平
改变T0初值改变频率，改变T1初值，改变占空比

小车的电机是直流电机，与其他电机区别是驱动方式，
直流电机通常采用连续移动的控制方式。
直流电机以电机电压为控制变量，以位置或速度为命令变量。
步进电机采用直接控制方式，它的主要命令和控制变量都是步阶位置。


单片机最重要的是寄存器的控制

中断原理
中断过程细分为7个步骤
中断源、中断申请、开放中断、保护现场、中断服务、恢复现场、中断返回


80C52单片机６个中断源，可实现４级中断嵌套，80C51有5个中断源
IP寄存器优先级  IE单路选择   EA总选择   TCON 选择低电平有效或者下降沿有效
SCON中断标志位  8位  字节地址98H
串行口中断标志位 RI与TI
RI 接收数据，每接收一个串行帧  置位RI
TI 发送数据，每发送一个串行帧  置位TI
两者必须由软件清除


CPU对中断系统所有中断以及中断源的控制都是由中断允许寄存器IE控制的，
IE寄存器  8位 字节地址A8H
7   6   5   4   3    2    1    0
EA          ES  ET1  EX1  ET0  EX0
EX0 外部中断0允许位
ET0 T0中断允许位
EX1 外部中断1允许位
ET1 T1中断允许位
ES  串行中断允许位
EA  CPU中断允许位

80C52单片机 4级中断嵌套
IP寄存器   8位 字节地址D8H
7   6   5    4   3    2    1    0
        PT2  PS  PT1  PX1  PT0  PX0
PX0 外部中断0优先级设定位
PT0 T0中断优先级设定位
PX1 外部中断1优先级设定位
PT1 T1中断优先级设定位
PS  串行中断优先级设定位
PT2 T2中断优先级设定位


中断请求原则  3个


中断处理过程
中断源提出请求
中断允许位为1
CPU开始中断（EA==1）
必须满足上述三个条件，ＣＰＵ才可能响应中断


中断完整步骤
１，中断请求，标志位置１
２，中断使能，中断源的中断允许位，全局中断允许位
３，中断响应，记录断点
４，中断处理，执行中断程序
５，中断返回，返回断点处


1、3、5 硬件完成。2、4编程完成。

中断请求标志位清除
外部中断
下降沿触发的情况，硬件置1，CPU响应时置0
电平触发时，中断请求由外部中断源控制
当CPU检测到ＩＮＴ引脚出现低电平，中断标志位ＩＥ由硬件置位
ＩＮＴ引脚出现高电平时，由硬件清除

定时器中断
由硬件置位，CPU响应后由硬件清除

串口中断
RI接收或者TI发送，都是硬件置位，软件清除

中断源有三个位
优先级定义位  选择中断优先权
中断使能位    每个中断源均可使能
中断请求标记位  中断发生时，硬件产生，中断响应后，硬件清除。


全局中断使能位EA（总允许位）
为0时，全局中断禁止，为1时，全局中断允许

INT中断触发方式
ITN触发方式控制位，为0时，电平触发，为1时，下降沿触发，默认电平触发


定义中断函数
void 函数名（） interrupt n
（1）interrupt 表示中断服务函数
（2）n 是中断号 中断的唯一编号
中断服务函数不需要声明
中断函数执行不可预测
中断跳转由硬件完成
通过中断号找到中断函数服务

中断函数不能进行参数传递
不能调用中断函数

中断顺序由硬件排列
优先级是程序决定的



